# Get the labels from a repository and gets a count 
# of pull requests and issues for each label.
#
query($_owner:String!, $_reponame:String!)
{
  repository(owner: $_owner, name: $_reponame) {
    id
    isPrivate
    labels(first:100, orderBy:{field:NAME, direction:ASC}) {
      # total quantity of labels in this repository
      totalCount
      # get all of the labels, and show some useful info
      nodes {
        name
        id
        color
        description
        # the quantity of issues using this label
        issues(first:1) {
          totalCount
        }
        # the quantity of pull requests using this label
        pullRequests(first:1) {
          totalCount
        }
      }
    }
  }
}

## Variable(s): If using the GraphiQL app the following gets
# placed in the "QUERY VARIABLES" pane without the "#" on 
# each line.
#{
#  "_owner":"jxmot",
#  "_reponame": "labelmgr-test"
#}

# The following is POST-ready, it can be used as the body
# in a POST operation. This can be used with Postman.
# {
#   "query": "query($_owner:String!, $_reponame:String!)\n{\n  repository(owner: $_owner, name: $_reponame) {\n    id\n    isPrivate\n    labels(first: 100, orderBy: {field: NAME, direction: ASC}) {\n      totalCount\n      nodes {\n        name\n        id\n        color\n        description\n        issues(first: 1) {\n          totalCount\n        }\n        pullRequests(first: 1) {\n          totalCount\n        }\n      }\n    }\n  }\n}\n\n\n",
#   "variables": {
#     "_owner": "jxmot",
#     "_reponame": "labelmgr-test"
#   }
# }