# Get User Repos and Collect Language Stats
# 
# The values returned by this query represent the totals for 
# the each language found in the repos. 
#
{
  user(login: "jxmot") {
    repositories(first: 100, isFork: false, ownerAffiliations: OWNER, orderBy: {direction: DESC, field: CREATED_AT}) {
      totalCount
      # still figuring out how pagination works
      pageInfo {
        hasNextPage
        hasPreviousPage
      }
      totalDiskUsage
      # the list of repositories
      nodes {
        nameWithOwner
        # private repo?
        isPrivate
        # here is the list of languages used in this repo
        languages(first: 100, orderBy: {direction: DESC, field: SIZE}) {
          totalCount
          # still figuring out how pagination works
          pageInfo {
            hasNextPage
            hasPreviousPage
          }
          edges {
            node {
              name
              color
            }
            size
          }
        }
      }
    }
  }
}

# The following is POST-ready, it can be used as the body
# in a POST operation. This can be used with Postman.
# {
#   "query": "{\n  user(login: \"jxmot\") {\n    repositories(first: 100, isFork: false, ownerAffiliations: OWNER, orderBy: {direction: DESC, field: CREATED_AT}) {\n      totalCount\n      pageInfo {\n        hasNextPage\n        hasPreviousPage\n      }\n      totalDiskUsage\n      nodes {\n        nameWithOwner\n        isPrivate\n        languages(first: 100, orderBy: {direction: DESC, field: SIZE}) {\n          totalCount\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n          }\n          edges {\n            node {\n              name\n              color\n            }\n            size\n          }\n        }\n      }\n    }\n  }\n}\n"
# }